
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mmondics.github.io/ocp-z-workshop/lab002/lab002-6/">
      
      
      
      
      <link rel="icon" href="../../images/openshift-logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Working with Pods - Red Hat OpenShift on IBM Z and LinuxONE Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#working-with-pods" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Red Hat OpenShift on IBM Z and LinuxONE Workshop" class="md-header__button md-logo" aria-label="Red Hat OpenShift on IBM Z and LinuxONE Workshop" data-md-component="logo">
      
  <img src="../../images/openshift-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Red Hat OpenShift on IBM Z and LinuxONE Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Working with Pods
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mmondics/ocp-z-workshop/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Red Hat OpenShift on IBM Z and LinuxONE Workshop" class="md-nav__button md-logo" aria-label="Red Hat OpenShift on IBM Z and LinuxONE Workshop" data-md-component="logo">
      
  <img src="../../images/openshift-logo.png" alt="logo">

    </a>
    Red Hat OpenShift on IBM Z and LinuxONE Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mmondics/ocp-z-workshop/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshop-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Presentations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Presentations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../presentations/combined-presentations.pdf" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presentation 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../presentations/combined-presentations.pdf#page=48" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presentation 2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hands-on Lab
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../print_page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Print Site
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="working-with-pods">Working with Pods<a class="headerlink" href="#working-with-pods" title="Permanent link">&para;</a></h1>
<p>One of the main benefits of using containers and Kubernetes-based cloud platforms like OpenShift is the ability to <em>scale horizontally</em> – rapidly duplicating or deleting pods to meet a desired state.</p>
<details class="information" open="open">
<summary>Information</summary>
<p>One of the core concepts of Kubernetes is the <em>Declarative State</em>. Users <em>declare</em> what resources they want, and Kubernetes does whatever it can to make that happen. Scaling is one example of this.</p>
</details>
<p>Scaling essentially creates copies of the application in order to distribute traffic to multiple instances and/or compute nodes for high availability and load balancing.</p>
<ol>
<li>
<p><strong>Enter the following command</strong> to get the name of your httpd deploymentconfig (dc)</p>
<div class="highlight"><pre><span></span><code>oc get dc
</code></pre></div>
<details class="example" open="open">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get dc
NAME            REVISION   DESIRED   CURRENT   TRIGGERED BY
httpd-example   1          1         1         config,image(httpd-example:latest)
</code></pre></div>
</details>
<p>Your deploymentconfig named <code>httpd-example</code> has a count desired = current = 1.</p>
</li>
<li>
<p><strong>Scale the httpd deployment to 3 replicas</strong>:</p>
<div class="highlight"><pre><span></span><code>oc scale dc/httpd-example --replicas=3
</code></pre></div>
<details class="example" open="open">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc scale dc/httpd-example --replicas=3
deploymentconfig.apps.openshift.io/httpd-example scaled
</code></pre></div>
</details>
</li>
<li>
<p><strong>Enter the following command again</strong> to see the scaled application.</p>
<div class="highlight"><pre><span></span><code>oc get dc
</code></pre></div>
<details class="example" open="open">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get dc
NAME    REVISION   DESIRED   CURRENT   TRIGGERED BY
httpd-example   1          3         3         config,image(httpd-example:latest)
</code></pre></div>
</details>
<p>This output is telling you that OpenShift knows that you want three copies (pods) of httpd, and it is successfully meeting that declared state.</p>
</li>
<li>
<p><strong>Enter the following command again to see your three pods</strong>:</p>
<div class="highlight"><pre><span></span><code>oc get pods
</code></pre></div>
<details class="example" open="open">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get pods
NAME             READY   STATUS      RESTARTS   AGE
httpd-example-1-92k2t    1/1     Running     0          29s
httpd-example-1-build    0/1     Completed   0          56m
httpd-example-1-deploy   0/1     Completed   0          56m
httpd-example-1-pgxxp    1/1     Running     0          56m
httpd-example-1-q77kh    1/1     Running     0          29s
</code></pre></div>
</details>
<p>Two of the pods will have a shorter age than the original one – these are the two new pods that were just created when you scaled the application.</p>
</li>
<li>
<p><strong>Dig into the pods a little bit further by entering the following command</strong>:</p>
<div class="highlight"><pre><span></span><code>oc describe pod/httpd-example-1-XXXXX
</code></pre></div>
<p>Where <code>XXXXX</code> is one of your unique strings of characters.</p>
<details class="example" open="open">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>Name:         httpd-example-1-92k2t
Namespace:    user00-project
Priority:     0
Node:         worker-1.atsocppa.dmz/192.168.176.141
Start Time:   Wed, 07 Sep 2022 12:02:52 -0400
Labels:       deployment=httpd-example-1
              deploymentconfig=httpd-example
              name=httpd-example
</code></pre></div>
</details>
<p>This command gives you all kinds of information about your pod. Notice the <code>Node:</code> field that begins with <code>worker-#</code>.</p>
</li>
<li>
<p><strong>Run the same command again, but on a different pod this time</strong>:</p>
<div class="highlight"><pre><span></span><code>oc describe pod/httpd-example-1-YYYYY
</code></pre></div>
<p>Where <code>YYYYY</code> is one of your other unique strings of characters. Pick one different than the previous step.</p>
<details class="example" open="open">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>Name:         httpd-example-1-pgxxp
Namespace:    user00-project
Priority:     0
Node:         worker-2.atsocppa.dmz/192.168.176.142
Start Time:   Wed, 07 Sep 2022 11:07:14 -0400
Labels:       deployment=httpd-example-1
            deploymentconfig=httpd-example
            name=httpd-example
</code></pre></div>
</details>
<p>It is likely (but not guaranteed) that this pod has been placed on a <em>different</em> compute node than the first pod you described. The reason for this is that you have three compute nodes in this OpenShift cluster, and Kubernetes balances the load for this application across multiple nodes.</p>
<p>Alternatively, you can achieve a similar result by adding adding different flags onto an <code>oc get</code> command.</p>
</li>
<li>
<p>Run the following command to get more information about the three pods:</p>
<div class="highlight"><pre><span></span><code>oc get pods -o wide
</code></pre></div>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get pods -o wide
NAME                     READY   STATUS      RESTARTS   AGE     IP             NODE                    NOMINATED NODE   READINESS GATES
httpd-example-1-92k2t    1/1     Running     0          2m37s   10.129.3.32    worker-1.atsocppa.dmz   &lt;none&gt;           &lt;none&gt;
httpd-example-1-build    0/1     Completed   0          58m     10.128.2.70    worker-2.atsocppa.dmz   &lt;none&gt;           &lt;none&gt;
httpd-example-1-deploy   0/1     Completed   0          58m     10.128.2.71    worker-2.atsocppa.dmz   &lt;none&gt;           &lt;none&gt;
httpd-example-1-pgxxp    1/1     Running     0          58m     10.128.2.72    worker-2.atsocppa.dmz   &lt;none&gt;           &lt;none&gt;
httpd-example-1-q77kh    1/1     Running     0          2m37s   10.131.1.102   worker-0.atsocppa.dmz   &lt;none&gt;           &lt;none&gt;
</code></pre></div>
<p>The <code>-o wide</code> flag reveals more columns that are typically hidden from the <code>oc get pods</code> command, including which node the pods are running on.</p>
</li>
</ol>
<p>You could also use the <code>-o</code> flag to pull specific data out of the pod details with YAML, JSON, custom columns, or go-template filters, such as:</p>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get pod httpd-example-1-92k2t -o go-template=&#39;{{.spec.nodeName}}{{&quot;\n&quot;}}&#39;
worker-1.atsocppa.dmz
</code></pre></div>
<p>Or: </p>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get pod httpd-example-1-92k2t -o jsonpath=&#39;{.spec.nodeName}&#39;
worker-1.atsocppa.dmz
</code></pre></div>
<p>Or:</p>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get pod httpd-example-1-92k2t -o custom-columns=NAME:.metadata.name,NODE:.spec.nodeName
NAME              NODE
httpd-example-1-92k2t   worker-1.atsocppa.dmz
</code></pre></div>
<p>Or: </p>
<div class="highlight"><pre><span></span><code>user01@lab061:~$ oc get pod httpd-example-1-92k2t -o yaml | grep nodeName
  nodeName: worker-1.atsocppa.dmz
</code></pre></div>
<p>As you can see from the examples above, the <code>oc</code> command line is extremely flexible and able to provide the required information in a myriad of ways. This applies not only to <code>oc get</code> commands, but also commands used to deploy or modify applications and pieces of the OpenShift infrastructure itself. This means that OpenShift can easily be integrated into different development and automation pipelines whether that is by developers or administrators.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024 IBM Z Washington Systems Center
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>